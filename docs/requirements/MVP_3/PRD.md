# MVP_3 产品需求文档 (PRD)

## 文档版本
- **版本**: 1.0
- **创建日期**: 2025-12-27
- **负责人**: Product Team
- **状态**: Draft

## 1. 产品概述

### 1.1 背景
在 MVP_1 和 MVP_2 的基础上，博客系统已实现基础功能和内容渲染增强。MVP_3 阶段聚焦于用户体验优化和视觉设计提升，通过改进布局、交互和视觉效果，提升博客的专业性和极客感。

### 1.2 目标
- 优化左侧导航栏布局，简化交互流程
- 提升视觉设计的技术感和极客氛围
- 增强文章页面的内容可读性和交互体验
- 改进文章页面布局，提高空间利用率

### 1.3 范围
本次迭代专注于 UI/UX 优化，不涉及新功能开发，包括：
- 导航栏结构调整
- 背景视觉效果优化
- 图表交互增强
- 文章页面布局优化

## 2. 需求详情

### 2.1 需求一：个人介绍模块作为主页入口

#### 2.1.1 需求描述
将左侧导航栏顶部的"返回主页"按钮移除，改为点击"个人介绍"模块即可返回主页，简化导航层级。

#### 2.1.2 当前状态
- 顶部独立的"返回主页"按钮（显示博客名称）
- 下方独立的"个人介绍"模块（不可点击）
- 导航菜单（Home、Archive、About）

#### 2.1.3 期望效果
- 移除顶部独立的"返回主页"按钮
- 个人介绍模块整体可点击
- 点击个人介绍模块任意位置跳转至主页（index.html）
- 鼠标悬停时显示可点击状态（cursor: pointer）
- 保持现有的个人介绍样式和布局

#### 2.1.4 技术实现要点
- 为个人介绍容器添加点击事件监听器
- 实现平滑的页面跳转或 SPA 路由切换
- 添加 hover 状态视觉反馈（如背景色变化、边框高亮等）
- 确保语义化 HTML（可使用 `<a>` 标签包裹或 JavaScript 处理）

#### 2.1.5 验收标准
- [ ] 顶部"返回主页"按钮已移除
- [ ] 点击个人介绍模块可成功跳转至主页
- [ ] 鼠标悬停时有明确的视觉反馈
- [ ] 移动端同样支持点击跳转
- [ ] 不影响个人介绍内容的可读性

---

### 2.2 需求二：技术感背景优化

#### 2.2.1 需求描述
当前背景为简单的方格线条，缺乏技术感和极客氛围。需要设计更具科技感的背景效果，体现博客的技术定位。

#### 2.2.2 当前状态
- 背景为静态方格线条（grid pattern）
- 整体风格偏简洁但略显单调

#### 2.2.3 期望效果
替换或增强背景设计，实现以下一种或多种效果：
- **动态效果**：粒子动画、矩阵代码雨、流动的代码片段
- **几何图形**：动态的六边形网格、电路板纹理、科技线条
- **低调氛围**：保持暗色主题，避免过于花哨分散注意力
- **性能友好**：使用 CSS 或轻量级 Canvas/SVG，避免影响页面性能

#### 2.2.4 设计方向建议
**方案 A：代码矩阵雨**
- 使用 Canvas 实现经典的 Matrix 风格代码雨效果
- 颜色：主色调 `#0d1117`，代码雨使用 `#58a6ff`（低透明度）
- 速度：慢速下落，避免干扰阅读

**方案 B：动态几何网格**
- CSS Grid + SVG 实现动态连接的节点网络
- 节点间的连线随鼠标移动或自动动画
- 颜色：使用现有 accent color `#58a6ff`，保持一致性

**方案 C：电路板纹理**
- 使用 CSS 或 SVG 绘制电路板风格的线条和节点
- 静态或轻微动画效果（如发光脉冲）
- 更加低调，适合长时间阅读

#### 2.2.5 技术实现要点
- 背景效果应为独立图层，不影响内容交互
- 使用 `z-index: -1` 或固定定位确保内容在最上层
- 考虑性能优化：使用 `will-change`、`transform` 等硬件加速
- 提供可选的开关功能（localStorage 存储用户偏好）
- 移动端可简化或禁用动画以节省性能

#### 2.2.6 验收标准
- [ ] 背景效果具有明显的技术感和极客氛围
- [ ] 不影响文字可读性和内容交互
- [ ] 页面性能无明显下降（60fps 流畅度）
- [ ] 移动端体验良好（或提供简化版本）
- [ ] 配色与整体设计风格一致

---

### 2.3 需求三：图表可点击放大

#### 2.3.1 需求描述
文章中的 Flowchart、Mermaid 图表等当前无法放大查看，影响复杂图表的可读性。需要实现图表的点击放大功能。

#### 2.3.2 当前状态
- Mermaid.js 渲染的图表为 SVG 格式
- 图表无法交互，复杂图表在移动端或小屏幕上难以查看
- medium-zoom 已集成但可能未应用于 Mermaid 图表

#### 2.3.3 期望效果
- 点击 Mermaid 图表后进入全屏或放大模式
- 提供关闭按钮或点击背景关闭
- 支持移动端触摸手势（缩放、拖动）
- 放大后保持清晰度（SVG 矢量图）

#### 2.3.4 技术实现要点
**方案 A：扩展 medium-zoom**
- 将 medium-zoom 应用于 Mermaid 生成的 SVG 元素
- 在 Mermaid 渲染完成后，为图表容器添加 `data-zoomable` 属性

**方案 B：自定义 Lightbox**
- 使用现有的 medium-zoom 或类似库（如 GLightbox）
- 为所有图表添加统一的点击放大逻辑
- 支持 SVG、PNG、JPG 等多种图片格式

**方案 C：模态弹窗**
- 点击图表后在模态框中显示放大版本
- 提供下载、全屏等额外功能
- 更强的交互控制能力

#### 2.3.5 特殊处理
- **Mermaid SVG**：需在渲染完成后动态绑定点击事件
- **代码块中的图表**：确保不会误触代码复制功能
- **响应式**：移动端优化触摸体验，避免与页面滚动冲突

#### 2.3.6 验收标准
- [ ] Mermaid 图表可点击放大
- [ ] 放大后图表清晰可读
- [ ] 提供明确的关闭方式（按钮或点击背景）
- [ ] 移动端体验良好（触摸缩放、拖动）
- [ ] 不影响文章其他内容的交互
- [ ] 支持键盘操作（ESC 关闭）

---

### 2.4 需求四：文章页面布局优化

#### 2.4.1 需求描述
当前文章页面两侧留白过多，导致内容区域偏窄，影响阅读体验。需要优化间距，提高空间利用率。

#### 2.4.2 当前状态
- **左侧导航栏**：固定宽度 240px
- **导航栏与文章**：存在较大间距
- **文章与右侧索引**：存在较大间距
- **文章内容区**：最大宽度约 900px（可能实际更窄）

#### 2.4.3 期望效果
- 减少导航栏与文章内容之间的间距
- 减少文章内容与右侧索引之间的间距
- 适当增加文章内容区的最大宽度
- 保持合理的可读性（行长不宜过长）
- 响应式布局在移动端自动适配

#### 2.4.4 具体调整建议

| 区域 | 当前值（预估） | 建议值 | 说明 |
|------|----------------|--------|------|
| 导航栏宽度 | 240px | 保持 240px | 不变 |
| 导航栏-内容间距 | 40-60px | 24-32px | 减少留白 |
| 内容区最大宽度 | 900px | 1000-1100px | 适度增加 |
| 内容-索引间距 | 40-60px | 24-32px | 减少留白 |
| 右侧索引宽度 | 200-240px | 保持不变 | 根据实际调整 |

#### 2.4.5 技术实现要点
- 调整 CSS Grid 或 Flexbox 布局参数
- 使用 CSS 变量统一管理间距（如 `--spacing-content-gap`）
- 确保在不同屏幕尺寸下保持良好的可读性
- 移动端（<768px）：单列布局，导航栏和索引收起或隐藏
- 平板端（768-1024px）：适度缩小间距，保持三栏布局

#### 2.4.6 可读性保障
- 文章主体行长控制在 60-80 字符（中文约 30-40 字）
- 段落间距保持舒适（1.5-2em）
- 代码块、图片等不受行长限制（可占满内容区）
- 避免过宽导致眼动距离过大

#### 2.4.7 验收标准
- [ ] 导航栏与文章间距减小至 24-32px
- [ ] 文章与索引间距减小至 24-32px
- [ ] 文章内容区宽度增加至 1000-1100px
- [ ] 在 1920px 宽屏下无明显空白浪费
- [ ] 在 1366px 笔记本屏幕下布局合理
- [ ] 移动端布局不受影响
- [ ] 可读性未因宽度增加而下降

---

## 3. 设计规范

### 3.1 颜色规范（保持一致）
- **Background**: `#0d1117` (GitHub Dark)
- **Text**: `#c9d1d9`
- **Accent**: `#58a6ff`
- **Code Background**: `#161b22`
- **Border**: `#30363d`

### 3.2 间距规范（更新）
```css
:root {
  --spacing-xs: 8px;
  --spacing-sm: 16px;
  --spacing-md: 24px;    /* 新：用于导航-内容、内容-索引 */
  --spacing-lg: 32px;
  --spacing-xl: 48px;
}
```

### 3.3 布局规范（更新）
- **侧边栏宽度**: 240px（固定）
- **内容区最大宽度**: 1000-1100px（从 900px 增加）
- **导航-内容间距**: 24-32px（从 40-60px 减少）
- **内容-索引间距**: 24-32px（从 40-60px 减少）

### 3.4 交互规范
- **可点击元素**：`cursor: pointer` + hover 状态反馈
- **图片/图表放大**：点击放大，ESC 或点击背景关闭
- **动画效果**：使用 `transition` 和 `transform`，时长 200-300ms

---

## 4. 技术栈

### 4.1 新增/增强库
- **背景动效**：
  - 选项 A：纯 CSS（性能最优）
  - 选项 B：Canvas API（灵活性高）
  - 选项 C：轻量级动画库（如 particles.js、three.js 的简化版）
  
- **图表放大**：
  - 复用现有 medium-zoom 或引入 GLightbox

### 4.2 现有技术（保持）
- Vanilla JavaScript
- CSS Grid / Flexbox
- Mermaid.js
- KaTeX
- Prism.js

---

## 5. 实施计划

### 5.1 开发阶段划分

#### Phase 1: 导航栏优化（1-2 天）
- [ ] 移除顶部"返回主页"按钮
- [ ] 为个人介绍模块添加点击跳转功能
- [ ] 实现 hover 状态视觉反馈
- [ ] 测试移动端和桌面端交互

#### Phase 2: 背景视觉升级（2-3 天）
- [ ] 确定背景设计方案（代码雨/几何网格/电路板）
- [ ] 实现背景动效（CSS 或 Canvas）
- [ ] 性能优化和移动端适配
- [ ] 添加用户偏好设置（可选）

#### Phase 3: 图表交互增强（1-2 天）
- [ ] 为 Mermaid 图表添加点击放大功能
- [ ] 测试 SVG 放大效果和清晰度
- [ ] 优化移动端触摸体验
- [ ] 添加键盘操作支持

#### Phase 4: 布局优化（1 天）
- [ ] 调整导航栏-内容间距
- [ ] 调整内容-索引间距
- [ ] 增加内容区最大宽度
- [ ] 响应式测试（多种屏幕尺寸）

#### Phase 5: 整合测试与部署（1 天）
- [ ] 跨浏览器测试（Chrome, Firefox, Safari, Edge）
- [ ] 移动端测试（iOS Safari, Chrome Android）
- [ ] 性能测试（Lighthouse 评分）
- [ ] 部署到 GitHub Pages

### 5.2 总工期
预计 **1-1.5 周**（6-10 个工作日）

---

## 6. 验收标准

### 6.1 功能完整性
- [ ] 所有四个需求均已实现
- [ ] 无功能回归问题

### 6.2 视觉效果
- [ ] 背景效果具有技术感和极客氛围
- [ ] 布局优化后空间利用率提升
- [ ] 整体设计风格统一

### 6.3 性能指标
- [ ] Lighthouse Performance Score ≥ 90
- [ ] 首屏加载时间 < 2s（3G 网络）
- [ ] 动画流畅度保持 60fps

### 6.4 兼容性
- [ ] 支持主流浏览器（Chrome, Firefox, Safari, Edge 最新版）
- [ ] 移动端（iOS/Android）体验良好
- [ ] 响应式布局正常（320px - 1920px）

### 6.5 可访问性
- [ ] 键盘操作支持（Tab 导航、ESC 关闭等）
- [ ] 颜色对比度符合 WCAG 2.1 AA 标准
- [ ] 屏幕阅读器友好（语义化 HTML）

---

## 7. 风险与注意事项

### 7.1 技术风险
- **背景动效性能**：复杂动画可能在低端设备上卡顿
  - 缓解：提供静态降级方案，移动端默认禁用
  
- **Mermaid SVG 放大兼容性**：某些浏览器可能渲染异常
  - 缓解：充分测试，必要时转换为 PNG 格式

### 7.2 用户体验风险
- **背景过于花哨**：可能分散阅读注意力
  - 缓解：设计时保持低调，提供关闭选项
  
- **布局过宽**：行长过长影响可读性
  - 缓解：控制最大宽度在 1100px，段落保持合理行长

### 7.3 依赖项
- 无外部 API 依赖
- 所有资源使用 CDN 或本地文件
- 确保 GitHub Pages 正常运行

---

## 8. 后续优化方向

MVP_3 完成后，可考虑的增强功能：
1. **主题切换**：明亮模式 / 暗黑模式
2. **字体设置**：用户可选字体大小和字体族
3. **阅读进度**：显示文章阅读进度条
4. **分享功能**：一键分享到社交媒体
5. **评论系统**：集成 Utterances 或 Gitalk

---

## 9. 参考资料

- [GitHub Dark Theme](https://primer.style/css/support/color-system)
- [Mermaid.js Documentation](https://mermaid-js.github.io/)
- [medium-zoom](https://github.com/francoischalifour/medium-zoom)
- [particles.js](https://vincentgarreau.com/particles.js/)
- [CSS Grid Layout Guide](https://css-tricks.com/snippets/css/complete-guide-grid/)

---

## 10. 附录

### 10.1 现有文件清单（待更新）
- `index.html`
- `post.html`
- `css/style.css`
- `js/app.js`
- `js/marked.min.js`
- `js/prism.js`
- `js/katex.js`
- `js/mermaid.js`

### 10.2 配色示例
```css
/* 现有配色 */
--bg-primary: #0d1117;
--text-primary: #c9d1d9;
--accent-blue: #58a6ff;
--code-bg: #161b22;
--border-color: #30363d;

/* 建议新增 */
--bg-hover: #161b22;
--accent-green: #3fb950;  /* 可选：用于成功状态 */
--accent-purple: #a371f7; /* 可选：用于特殊高亮 */
```

---

**文档状态**: Draft  
**下一步**: 技术评审 → 开发排期 → 实施开发